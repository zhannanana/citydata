<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Dashboard Template for Bootstrap</title>
  <!-- 引入 ECharts 文件 -->
  <script src="../../js/echarts.min.js"></script>
  <script  src="../../js/jquery.min.js"></script>
  <!-- Bootstrap core CSS -->
  <link href="../../dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="../../css/dashboard.css" rel="stylesheet">
  <link href="../../css/theme.css" rel="stylesheet">

  <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
  <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
  <script src="../../assets/js/ie-emulation-modes-warning.js"></script>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>

<body>
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">智慧城市计算数据展示平台</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="../index/index-main.html">首页<span class="sr-only">(current)</span></a></li>
        <li class="active"><a href="traffic-index.html">城市交通<span class="sr-only">(current)</span></a></li>
        <li><a href="../meteorology/meteorology-index.html">城市气象</a></li>
        <li><a href="../hydrology/hydrology-index.html">水文计算 </a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>
<div class="container-fluid">
  <div class="row">
    <div class="col-md-8 col-md-offset-2 main">
      <h1 class="page-header">北京市出租车数据微观分析</h1>
      <!--在下面填充内容-->
      <ul class="nav nav-tabs">
        <li><a href="traffic-index.html">出租车日流量变化</a></li>
        <li class="active"><a href="traffic-m4.html">城市拥堵分析</a></li>
        <li><a href="traffic-m5.html">出租车用户行为分析</a></li>
      </ul>
      <div>

        <div class="panel panel-primary">
          <div class="panel-heading">
            <h4>区域拥堵排名</h4>
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-sm-6">
                <table class="table table-responsive table-hover table-striped table-bordered">
                  <h3>2015年北京区域拥堵排名</h3>
                  数据来自北京2015出租车交通数据
                  <thead>
                  <tr>
                    <th>排名</th>
                    <th>区域</th>
                    <th>拥堵指数</th>
                    <th>平均速度</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr>
                    <th>1</th>
                    <th>西城区</th>
                    <th>1.46</th>
                    <th>28.74</th>
                  </tr>
                  <tr>
                    <th>2</th>
                    <th>东城区</th>
                    <th>1.42</th>
                    <th>28.68</th>
                  </tr>
                  <tr>
                    <th>3</th>
                    <th>朝阳区</th>
                    <th>1.39</th>
                    <th>35.6</th>
                  </tr>
                  <tr>
                    <th>4</th>
                    <th>昌平区</th>
                    <th>1.36</th>
                    <th>28.06</th>
                  </tr>
                  <tr>
                    <th>5</th>
                    <th>海淀区</th>
                    <th>1.28</th>
                    <th>39.25</th>
                  </tr>
                  <tr>
                    <th>6</th>
                    <th>通州区</th>
                    <th>1.24</th>
                    <th>30.18</th>
                  </tr>
                  <tr>
                    <th>7</th>
                    <th>丰台区</th>
                    <th>1.2</th>
                    <th>40.92</th>
                  </tr>
                  <tr>
                    <th>8</th>
                    <th>大兴区</th>
                    <th>1.18</th>
                    <th>46.08</th>
                  </tr>
                  </tbody>
                </table>
              </div>
              <div class="col-sm-6" id="main" style="width: 600px;height:400px;"></div>
            </div>
          </div>
        </div>

        <div class="panel panel-success">
          <div class="panel-heading">
            <h4>北京市一天内各个时段平均车速</h4>
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-sm-6">
                <div id="chart2" style="width:600px; height:400px"></div>
              </div>
              <div class="col-sm-6">
                <!--4月份每日各时段平均车速排行-->
                <table class="table table-responsive table-hover table-striped table-bordered">
                  <h3>日均拥堵时段排名</h3>
                  数据来自北京2015出租车交通数据
                  <thead>
                  <tr>
                    <th>排名</th>
                    <th>时段</th>
                    <th>拥堵指数</th>
                    <th>平均速度</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr>
                    <th>1</th>
                    <th>8:00-9:00</th>
                    <th>1.46</th>
                    <th>28.74</th>
                  </tr>
                  <tr>
                    <th>2</th>
                    <th>7:00-8:00</th>
                    <th>1.42</th>
                    <th>28.68</th>
                  </tr>
                  <tr>
                    <th>3</th>
                    <th>17:00-18:00</th>
                    <th>1.39</th>
                    <th>35.6</th>
                  </tr>
                  <tr>
                    <th>4</th>
                    <th>18:00-19:00</th>
                    <th>1.36</th>
                    <th>28.06</th>
                  </tr>
                  <tr>
                    <th>5</th>
                    <th>10:00-11:00</th>
                    <th>1.28</th>
                    <th>39.25</th>
                  </tr>
                  <tr>
                    <th>6</th>
                    <th>19:00-20:00</th>
                    <th>1.24</th>
                    <th>30.18</th>
                  </tr>
                  <tr>
                    <th>7</th>
                    <th>13:00-14:00</th>
                    <th>1.2</th>
                    <th>40.92</th>
                  </tr>
                  <tr>
                    <th>8</th>
                    <th>15:00-14:00</th>
                    <th>1.18</th>
                    <th>46.08</th>
                  </tr>
                  </tbody>
                </table>
              </div>
            </div>

          </div>
        </div>

        <div class="panel panel-danger">
          <div class="panel-heading">
            <h4>节假日工作日车速对比</h4>
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-sm-6">
                <div id="chart4" style="width:600px; height:400px"></div>
              </div>
              <div class="col-sm-6">
                <div id="chart3" style="width:600px; height:400px"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../../dist/js/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="../../dist/js/bootstrap.min.js"></script>
<!-- Just to make our placeholder images work. Don't actually copy the next line! -->
<script src="../../assets/js/vendor/holder.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
<!--loading echarts-->
<script type="text/javascript">
    var myChart = echarts.init(document.getElementById('main'));
    myChart.showLoading();
    $.get('../../data/beijing.json', function (beijingJson) {
        myChart.hideLoading();

        echarts.registerMap('BJ', beijingJson);
        option = {
            title: {
                text: '北京区域拥堵(2015)',
                subtext: '数据来自北京2015出租车交通数据',
                left: 'right'
            },
            tooltip: {
                trigger: 'item',
                showDelay: 0,
                transitionDuration: 0.2,
                formatter: function (params) {
                    var value = (params.value + '').split('.');
                    value = value[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g, '$1,');
                    return params.seriesName + '<br/>' + params.name + ': ' + value;
                }
            },
            visualMap: {
                left: 'right',
                min: 0,
                max: 200,
                inRange: {
                    color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                },
                text:['拥堵','畅通'],           // 文本，默认为数值文本
                calculable: true
            },
            toolbox: {
                show: true,
                //orient: 'vertical',
                left: 'left',
                top: 'top',
                feature: {
                    dataView: {readOnly: false},
                    restore: {},
                    saveAsImage: {}
                }
            },
            series: [
                {
                    name: '拥堵指数',
                    type: 'map',
                    roam: true,
                    map: 'BJ',
                    itemStyle:{
                        emphasis:{label:{show:true}}
                    },
                    data:[
                        {name: '东城区', value: 190},
                        {name: '西城区', value: 200},
                        {name: '朝阳区', value: 160},
                        {name: '丰台区', value: 100},
                        {name: '石景山区', value: 80},
                        {name: '海淀区', value: 150},
                        {name: '门头沟区', value: 50},
                        {name: '房山区', value: 75},
                        {name: '通州区', value: 90},
                        {name: '顺义区', value: 85},
                        {name: '昌平区', value: 128},
                        {name: '大兴区', value: 79},
                        {name: '怀柔区', value: 70},
                        {name: '平谷区', value: 40},
                        {name: '密云区', value: 50},
                        {name: '延庆区', value: 30}
                    ]
                }
            ]
        };
        myChart.setOption(option);
    });
</script>

<!--4月车速-->
<script type="text/javascript">
    var myChart2 = echarts.init(document.getElementById('chart2'));
    var xx=[];
    var yy=[];
    $.get('../../data/22points.json', function (result) {
        $.each(result, function (index, item) {
            xx.push(item.xx);
            yy.push(item.yy);
        });
        myChart2.setOption(option2 = {
            title: {
                text: '北京2015年4月道路速度变化'
            },
            tooltip: {
                trigger: 'axis'
            },
            xAxis: {
                data: xx
            },
            yAxis: {
                splitLine: {
                    show: false
                }
            },
            toolbox: {
                left: 'center',
                feature: {
                    dataZoom: {
                        yAxisIndex: 'none'
                    },
                    restore: {},
                    saveAsImage: {}
                }
            },
            dataZoom: [{
                startValue: '2014-06-01'
            }, {
                type: 'inside'
            }],
            visualMap: {
                top: 10,
                right: 10,
                pieces: [{
                    gt: 0,
                    lte: 10,
                    color: '#dc2f15'
                }, {
                    gt: 10,
                    lte: 20,
                    color: '#e7824a'
                }, {
                    gt: 20,
                    lte: 30,
                    color: '#afd663'
                }, {
                    gt: 30,
                    lte: 50,
                    color: '#1c7e1d'
                }, {
                    gt: 50,
                    color: '#70ba00'
                }],
                outOfRange: {
                    color: '#70ba00'
                }
            },
            series: {
                name: 'Beijing AQI',
                type: 'line',
                data: yy,
                markLine: {
                    silent: true,
                    data: [{
                        yAxis: 50
                    }, {
                        yAxis: 100
                    }, {
                        yAxis: 150
                    }, {
                        yAxis: 200
                    }, {
                        yAxis: 300
                    }]
                }
            }
        });
    });
</script>
<!--4月每周平均车速-->
<script type="text/javascript">
    var myChart3 = echarts.init(document.getElementById('chart3'));
    option3 = {
        title: {
            text: '星期平均车速'
        },
        xAxis: {
            type: 'category',
            data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
        },
        yAxis: {
            type: 'value',
            max:35,
            min:20,
        },
        series: [{
            data: [25, 26, 27, 26.4, 27.8, 25.5, 24.5],
            type: 'bar'
        }]
    };
    myChart3.setOption(option3)

</script>
<!--工作日与节假日车速-->
<script type="text/javascript">
    var myChart4 = echarts.init(document.getElementById('chart4'));
    option4 = {
        title: {
            text: '工作日与节假日车速'
        },
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data:['工作日','节假日']
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        toolbox: {
            feature: {
                saveAsImage: {}
            }
        },
        xAxis: {
            type: 'category',
            boundaryGap: false,
            data: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]
        },
        yAxis: {
            type: 'value'
        },
        series: [
            {
                name:'工作日',
                type:'line',
                stack: '总量',
                data:[43,42,43.5,43,49,50,52,55,50,49,40,35,36,37,34,33,35,37,36,39,40,45,46,47]
            },
            {
                name:'节假日',
                type:'line',
                stack: '总量',
                data:[43,42,43.5,44,45,46,48,51,50,49,40,35,36,37,34,33,35,37,36,39,40,45,46,47]
            }
        ]
    };

    myChart4.setOption(option4)

</script>

</body>
</html>
